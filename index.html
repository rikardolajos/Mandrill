<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mandrill: Mandrill</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mandrill<span id="projectnumber">&#160;2025.10.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Mandrill </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2runner_2work_2Mandrill_2Mandrill_2README"></a> <img src="res/icon.png" alt=" " align="right" width="128" height="128" onerror="this.remove()" class="inline"/></p>
<p>This is an education and research graphics framework written and used at Lund University. Mandrill uses the Vulkan API and lightly abstracts some of its most commonly used features without restricting the low-level controll offered by using Vulkan. This repository contains the main framework together with some sample apps that are located in the <code>app</code> folder. New apps can be created in the same folder, but it is recommened to create a new repository for each project or application, and accessing the Mandrill framework as a submodule.</p>
<p>Mandrill uses <a href="https://github.com/glfw/glfw">GLFW</a> for window handling and <a href="https://github.com/ocornut/imgui">Dear ImGUI</a> for user interaction through an immediate mode user interface. Image loading is provided through <a href="https://github.com/nothings/stb">stb</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
API Reference</h1>
<p>The Mandrill API reference is available on the GitHub Pages site: <a href="https://rikardolajos.github.io/Mandrill/">Mandrill API</a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Build</h1>
<p>Clone the repo, and make sure to also initialize the submodules: </p><pre class="fragment">git clone --recurse-submodules https://github.com/rikardolajos/Mandrill.git
</pre><p> If you cloned the repo but forgot to initialize the submodules, use: </p><pre class="fragment">git submodule update --init --recursive
</pre><p> This project uses CMake to generate project files, and has been tested on Windows with Visual Studio and on Linux with Make.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Windows</h2>
<p>Use Visual Studio's internal CMake support for setting up the project: after cloning the git repo as instructed above, start Visual studio and pick <code>Open a local folder</code> and pick the folder where the repo was cloned to. Compile all targets with <code>Ctrl + Shift + B</code>, and use the dropdown menu with the green triangle to run a compiled application.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Linux</h2>
<p>On Linux, use the CMake command line interface to setup the project. Navigate to the folder where the repo resides: </p><pre class="fragment">cd Mandrill
</pre><p> Create a build folder: </p><pre class="fragment">mkdir build
</pre><p> Change into the build folder and initialize CMake: </p><pre class="fragment">cd build
cmake ..
</pre><p> To build and compile the project use: </p><pre class="fragment">cmake --build .
</pre><p> To run the project, change to the binary output folder and run a executable file: </p><pre class="fragment">cd bin
./SampleApp.bin
</pre> <h1><a class="anchor" id="autotoc_md5"></a>
Setting up a new project with Mandrill as submodule</h1>
<p>To setup a new repository that uses Mandrill, follow these steps. Create a new folder and initialize git in it: </p><pre class="fragment">mkdir Example
cd Example
git init
</pre><p> Add Mandrill as a submodule: </p><pre class="fragment">git submodule add https://github.com/rikardolajos/Mandrill.git
</pre><p> Initialize Mandrill and its submodules: </p><pre class="fragment">git submodule update --init --recursive
</pre><p> Now add a <code>CMakeLists.txt</code> file to your repo with the following: </p><pre class="fragment">cmake_minimum_required(VERSION 3.13)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

project("Example" VERSION 1.0.0)

set(MANDRILL_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

find_package(Vulkan REQUIRED COMPONENTS glslc)
include_directories(${Vulkan_INCLUDE_DIRS})
link_libraries(${Vulkan_LIBRARIES})

set(MANDRILL_EXCLUDE_APPS ON)
include_directories(Mandrill/src)
include_directories(Mandrill/src/External)
include_directories(Mandrill/submodules/glm)
include_directories(src)

add_subdirectory(Mandrill)
add_subdirectory(src)
</pre><p> Create a folder for your source files: </p><pre class="fragment">mkdir src
</pre><p> Then add a second <code>CMakeLists.txt</code> in <code>src</code> with the following: </p><pre class="fragment">add_mandrill_executable(Example)

target_sources(Example PRIVATE
    "Example.cpp"
)

add_shaders(Example
    "VertexShader.vert"
    "FragmentShader.frag"
)
</pre><p> To get started, you can copy any of the applications in <code>Mandrill/app</code> to your project folder. For instance: </p><pre class="fragment">cp Mandrill/app/SampleApp/SampleApp.cpp src/Example.cpp
cp Mandrill/app/SampleApp/VertexShader.vert src/VertexShader.vert
cp Mandrill/app/SampleApp/FragmentShader.frag src/FragmentShader.frag
</pre><p> (On Windows, use <code>copy</code> instead of <code>cp</code>.)</p>
<p>Remember that if you copy from like this, the paths to the shader files have to be changed in <code>Example.cpp</code>.</p>
<p>From: </p><pre class="fragment">shaderDesc.emplace_back("SampleApp/VertexShader.vert", "main", VK_SHADER_STAGE_VERTEX_BIT);
shaderDesc.emplace_back("SampleApp/FragmentShader.frag", "main", VK_SHADER_STAGE_FRAGMENT_BIT);
</pre><p> To: </p><pre class="fragment">shaderDesc.emplace_back("Example/VertexShader.vert", "main", VK_SHADER_STAGE_VERTEX_BIT);
shaderDesc.emplace_back("Example/FragmentShader.frag", "main", VK_SHADER_STAGE_FRAGMENT_BIT);
</pre><p> Then follow the build instructions above (from after the submodules are initialized).</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Apps</h1>
<p>The applications provided in this repository can be found in the <code>app</code> folder, and showcase different ways of using Mandrill.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
SampleApp</h2>
<p>This is a minimal app, with rendering of a single textured billboard. Custom vertex and index buffers are used to draw the mesh, and the Mandrill descriptor abstraction is used.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
SceneViewer</h2>
<p>The scene viewer uses the <code>Scene.cpp</code> scene abstraction that allows for loading meshes from Wavefront OBJ files. To upload the scene from host (CPU) to device (GPU), the scene has to be compiled and synced to device. See the <code>loadScene()</code> function and the <code><a class="el" href="Scene_8h_source.html">Scene.h</a></code> documentation for proper use. The scene has a predetermined set of descritors that are used for rendering materials and so on.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
SDF</h2>
<p>This application implements a basic signed distance field (SDF) renderer. Rendering is done using a fullscreen triangle pair, and the SDF is sampled in the fragment shader.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
RayTracer</h2>
<p>Mandrill abstracts some of the ray tracing handling as well (pipeline, shader binding table, and acceleration structure creation). This ray tracer app shows how this functionality can be used.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
VolumeViewer</h2>
<p>This application implements a basic ray marcher for rendering of volumetric entities. **(Requires OpenVDB, see below.)**</p>
<h1><a class="anchor" id="autotoc_md12"></a>
OpenVDB</h1>
<p>Mandrill supports the use of VDB files. For this to work, OpenVDB has to be available on your system so that CMake can find it during project generation. If it is not found, a warning message will be given and the use of <code>Texture3D</code> will not be available. See <code>app/VolumeViewer</code> for an example of loading a volume from a VDB file and then rendering it with ray marching.</p>
<p>On Windows, the easiest way of setting up OpenVDB for Mandrill, is to use <a href="https://github.com/microsoft/vcpkg">vcpkg</a>: </p><pre class="fragment">vcpkg install openvdb
</pre> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
